{% extends "base.html" %}

{% block content %}
<h2>Uploaded Trend Charts</h2>

{% if charts %}
    {% regroup charts by pid_loop as grouped_charts %}
    <ul>
        {% for group in grouped_charts %}
            <li>
                <strong>PID Loop: {{ group.grouper.name }}</strong>
                <ul>
                    {% for chart in group.list %}
                        <li>
                            ID: {{ chart.id }} |
                            Description: {{ chart.description|default:"No description provided" }} |
                            <a href="{% url 'view_trend_chart' chart.id %}">View Trend</a> |
                            <a href="{{ chart.csv_file.url }}" download>Download CSV</a>
                        </li>
                    {% endfor %}
                </ul>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No trend charts have been uploaded yet.</p>
{% endif %}
{% endblock %}
